<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        min-height: 100vh;
        background-color: rgba(0, 0, 0, 0.875);
      }
.wrapper{
    min-height: 100vh;
    width:100vw;
}
      .searchbar {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px;
      }

      #search {
        min-width: 150px;
        border-style: none;
        border: 1px rgb(211, 206, 206);
        border-radius: 20px;
        padding: 7px;
        background-color: grey;
        color: aliceblue;
        font-weight: bold;
        font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
          "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
      }

   .imglist {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    grid-auto-rows: minmax(150px, auto);
    gap: 15px;
    padding: 20px;
    overflow-x: hidden; 
}

      .imglist img {
        width: 100%;
        height: 100%;
        border:2px solid #a777e3;
        object-fit: cover;
        border-radius: 10px;
        transition: all 0.5s ease;
        opacity: 0;
      }
      .imglist img[src] {
        opacity: 1;
      }

      .imglist img:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      }

      #search:hover,
      .search-btn:hover {
        box-shadow: 0px 0px 5px white;
        border: 2px solid white;
      }

      .search-btn:hover {
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div class="wrapper">
      <div class="searchbar">
        <input type="text" id="search" value="nature" />
        <div
          class="search-btn"
          id="search-btn"
          style="
            display: grid;
            place-items: center;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
          "
        >
          <svg
            fill="#ffffff"
            width="20px"
            height="20px"
            viewBox="0 -0.24 28.423 28.423"
            id="_02_-_Search_Button"
            data-name="02 - Search Button"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              id="Path_215"
              data-name="Path 215"
              d="M14.953,2.547A12.643,12.643,0,1,0,27.6,15.19,12.649,12.649,0,0,0,14.953,2.547Zm0,2A10.643,10.643,0,1,1,4.31,15.19,10.648,10.648,0,0,1,14.953,4.547Z"
              transform="translate(-2.31 -2.547)"
              fill-rule="evenodd"
            />
            <path
              id="Path_216"
              data-name="Path 216"
              d="M30.441,28.789l-6.276-6.276a1,1,0,1,0-1.414,1.414L29.027,30.2a1,1,0,1,0,1.414-1.414Z"
              transform="translate(-2.31 -2.547)"
              fill-rule="evenodd"
            />
          </svg>
        </div>
      </div>
      <div class="imglist" id="imglist"></div>
      <div style="display: flex; justify-content: center; margin: 20px">
        <button
          id="load"
          style="
            padding: 12px 30px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            font-weight: bold;
            font-size: 16px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display:none;
          "
          onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.3)';"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.2)';"
        >
          Load More
        </button>
      </div>
    </div>
    <script>
      const searchbtn = document.getElementById("search-btn");
      const imglist = document.getElementById("imglist");
      id = "hs9xv5F07lXyr1H6LptsHmDBbj6Apw3N9uYD5bkuXRY";
      const load = document.getElementById("load");
      let lastkeyword = "";
      nimages=20;
      pnum=1;
      async function imagefetch(keyword, id,pnum) {
      
        try {
          const res = await fetch(
            `https://api.unsplash.com/search/photos?query=${keyword}&client_id=${id}&page=${pnum}&per_page=${nimages}`
          );
          const data = await res.json();
          const images = data.results;
          const images1 = data.results[0].urls.raw;
          console.log(images1);
          let imgurl_list = [];
          for (i = 0; i < images.length; i++) {
            imgurl_list.push(data.results[i].urls.small);
          }
          console.log(imgurl_list);
          for (let img of imgurl_list) {
            const imgtag = document.createElement("img");
            imgtag.setAttribute("src", `${img}`);
            imglist.append(imgtag);
            imgtag.loading = "lazy";
          }
        } catch (err) {
          console.error(`Images related to ${keyword} is not found)`, err);
        }
      }
      searchbtn.addEventListener("click", () => {
        const keyword = document.getElementById("search").value.trim();
if (keyword && keyword != lastkeyword) {
    imglist.innerHTML = ''; 
    lastkeyword = keyword;
    pnum = 1; 
    load.style.display = 'block';
    imagefetch(keyword, id, pnum);
}

      });
      load.addEventListener("click", () => {
       pnum++;
       imagefetch(lastkeyword, id, pnum); 
      });
    </script>
  </body>
</html>
